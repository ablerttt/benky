{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/Albert/Documents/UCLA 2019/Projects/flare/client/src/auth/EmailChange/index.js\";\nimport React from \"react\";\nimport { withFirebase } from \"../Firebase\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport styles from \"../../constants/styles\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { compose } from \"recompose\";\n\nclass EmailChange extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onSubmit = async e => {\n      e.preventDefault();\n      this.setState({\n        error: \"\",\n        success: \"\"\n      });\n      const oldEmail = document.getElementById(\"oldEmail\").value;\n      const newEmail = document.getElementById(\"newEmail\").value; // console.log(\"SUBMIT WITH \" + oldEmail + \" and \" + newEmail);\n\n      const correctOldEmail = this.props.firebase.doVerifyEmail(oldEmail);\n\n      if (!correctOldEmail) {\n        this.setState({\n          error: \"Old email address provided does not match with this user's email address.\"\n        });\n        return;\n      } else {\n        await this.props.firebase.doUpdateEmail(newEmail).then(res => {\n          console.log(\"RES\");\n          console.log(res);\n          this.setState({\n            erorr: \"\",\n            success: \"\"\n          });\n        }).catch(e => {\n          console.log(\"ERR\");\n          console.log(e);\n          this.setState({\n            error: e.message,\n            success: \"\"\n          });\n        });\n      }\n    };\n\n    this.state = {\n      error: \"\",\n      success: \"\"\n    };\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    const {\n      error,\n      success\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }, \"Change the email that your account is linked to. If you forget your password, you'll receive any emails from this email instead.\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"oldEmail\",\n      label: \"Old Email Address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      id: \"newEmail\",\n      label: \"New Email Address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      variant: \"contained\",\n      className: classes.primaryLightButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }, \"Change Email\")), error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 19\n      }\n    }, error), success && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }\n    }, success));\n  }\n\n}\n\nexport default compose(withStyles(styles), withFirebase)(EmailChange);","map":{"version":3,"sources":["/mnt/c/Users/Albert/Documents/UCLA 2019/Projects/flare/client/src/auth/EmailChange/index.js"],"names":["React","withFirebase","Button","TextField","styles","withStyles","compose","EmailChange","Component","constructor","props","onSubmit","e","preventDefault","setState","error","success","oldEmail","document","getElementById","value","newEmail","correctOldEmail","firebase","doVerifyEmail","doUpdateEmail","then","res","console","log","erorr","catch","message","state","render","classes","primaryLightButton"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { withFirebase } from \"../Firebase\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport styles from \"../../constants/styles\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { compose } from \"recompose\";\r\n\r\nclass EmailChange extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { error: \"\", success: \"\" };\r\n  }\r\n\r\n  onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    this.setState({ error: \"\", success: \"\" });\r\n    const oldEmail = document.getElementById(\"oldEmail\").value;\r\n    const newEmail = document.getElementById(\"newEmail\").value;\r\n    // console.log(\"SUBMIT WITH \" + oldEmail + \" and \" + newEmail);\r\n    const correctOldEmail = this.props.firebase.doVerifyEmail(oldEmail);\r\n    if (!correctOldEmail) {\r\n      this.setState({\r\n        error:\r\n          \"Old email address provided does not match with this user's email address.\",\r\n      });\r\n      return;\r\n    } else {\r\n      await this.props.firebase\r\n        .doUpdateEmail(newEmail)\r\n        .then((res) => {\r\n          console.log(\"RES\");\r\n          console.log(res);\r\n          this.setState({erorr: \"\", success:\"\"})\r\n        })\r\n        .catch((e) => {\r\n          console.log(\"ERR\");\r\n          console.log(e);\r\n          this.setState({ error: e.message, success:\"\" });\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { error, success } = this.state;\r\n    return (\r\n      <div>\r\n        <div>\r\n          Change the email that your account is linked to. If you forget your\r\n          password, you'll receive any emails from this email instead.\r\n        </div>\r\n        <br />\r\n        <form onSubmit={this.onSubmit}>\r\n          <TextField id=\"oldEmail\" label=\"Old Email Address\" />\r\n          <br />\r\n          <TextField id=\"newEmail\" label=\"New Email Address\" />\r\n          <br />\r\n          <br />\r\n          <Button\r\n            type=\"submit\"\r\n            variant=\"contained\"\r\n            className={classes.primaryLightButton}\r\n          >\r\n            Change Email\r\n          </Button>\r\n        </form>\r\n        {error && <p>{error}</p>}\r\n        {success && <p>{success}</p>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(withStyles(styles), withFirebase)(EmailChange);\r\n"]},"metadata":{},"sourceType":"module"}