{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/Albert/Documents/UCLA 2019/Projects/flare/client/src/auth/PasswordChange/index.js\";\nimport React, { Component } from \"react\";\nimport { withFirebase } from \"../Firebase\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { compose } from \"recompose\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport styles from \"../../constants/styles\";\nimport { Console } from \"console\";\nconst INITIAL_STATE = {\n  passwordOne: \"\",\n  passwordTwo: \"\",\n  currentPassword: \"\",\n  error: null\n};\n\nclass PasswordChangeForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.verifyCurrentPassword = async currentPassword => {\n      await this.props.firebase.doCurrentPasswordVerification(currentPassword);\n    };\n\n    this.updateCurrentPassword = async password => {\n      await this.props.firebase.doPasswordUpdate(password);\n    };\n\n    this.managePasswordActions = async (newPass1, newPass2, oldPass) => {\n      await this.verifyCurrentPassword(oldPass).then(res => {\n        if (newPass1 !== newPass2) {\n          console.log(\"DIFFERENT NEW PASSWORDS\");\n          this.setState({\n            error: \"The two passwords are different from each other.\"\n          });\n        }\n\n        return this.updateCurrentPassword(newPass1);\n      }).catch(e => {\n        return e;\n      });\n    };\n\n    this.onSubmit = async e => {\n      e.preventDefault(); // this.setState({ error: \"\" });\n\n      const {\n        passwordOne,\n        passwordTwo,\n        currentPassword\n      } = this.state;\n\n      if (passwordOne !== passwordTwo) {\n        console.log(\"DIFFERENT NEW PASSWORDS\");\n        this.setState({\n          error: {\n            message: \"The two passwords are different from each other.\"\n          }\n        });\n        return;\n      }\n\n      let response = this.managePasswordActions(passwordOne, passwordTwo, currentPassword);\n      console.log(\"RESPONSE\");\n      console.log(response);\n    };\n\n    this.onChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = { ...INITIAL_STATE,\n      updated: false,\n      success: \"\"\n    };\n  }\n\n  render() {\n    const {\n      currentPassword,\n      passwordOne,\n      passwordTwo,\n      error,\n      success\n    } = this.state;\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, \"Change the email that your account is linked to. If you forget your password, you'll receive any emails from this email instead.\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"currentPassword\",\n      value: currentPassword,\n      onChange: this.onChange,\n      type: \"password\",\n      label: \"Original Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      name: \"passwordOne\",\n      value: passwordOne,\n      onChange: this.onChange,\n      type: \"password\",\n      label: \"New Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      name: \"passwordTwo\",\n      value: passwordTwo,\n      onChange: this.onChange,\n      type: \"password\",\n      label: \"Confirm New Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      className: classes.primaryLightButton,\n      variant: \"contained\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, \"Reset Password\"), error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }\n    }, error), success && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 23\n      }\n    }, success)));\n  }\n\n} // export default withFirebase(PasswordChangeForm);\n\n\nexport default compose(withFirebase, withStyles(styles))(PasswordChangeForm);","map":{"version":3,"sources":["/mnt/c/Users/Albert/Documents/UCLA 2019/Projects/flare/client/src/auth/PasswordChange/index.js"],"names":["React","Component","withFirebase","TextField","Button","compose","withStyles","styles","Console","INITIAL_STATE","passwordOne","passwordTwo","currentPassword","error","PasswordChangeForm","constructor","props","verifyCurrentPassword","firebase","doCurrentPasswordVerification","updateCurrentPassword","password","doPasswordUpdate","managePasswordActions","newPass1","newPass2","oldPass","then","res","console","log","setState","catch","e","onSubmit","preventDefault","state","message","response","onChange","event","target","name","value","updated","success","render","classes","primaryLightButton"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { withFirebase } from \"../Firebase\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { compose } from \"recompose\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"../../constants/styles\";\r\nimport { Console } from \"console\";\r\n\r\nconst INITIAL_STATE = {\r\n  passwordOne: \"\",\r\n  passwordTwo: \"\",\r\n  currentPassword: \"\",\r\n  error: null,\r\n};\r\n\r\nclass PasswordChangeForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { ...INITIAL_STATE, updated: false, success: \"\" };\r\n  }\r\n\r\n  verifyCurrentPassword = async (currentPassword) => {\r\n    await this.props.firebase.doCurrentPasswordVerification(currentPassword);\r\n  };\r\n\r\n  updateCurrentPassword = async (password) => {\r\n    await this.props.firebase.doPasswordUpdate(password);\r\n  };\r\n\r\n  managePasswordActions = async (newPass1, newPass2, oldPass) => {\r\n    await this.verifyCurrentPassword(oldPass)\r\n      .then((res) => {\r\n        if (newPass1 !== newPass2) {\r\n          console.log(\"DIFFERENT NEW PASSWORDS\")\r\n          this.setState({error: \"The two passwords are different from each other.\"})\r\n        }\r\n        return this.updateCurrentPassword(newPass1);\r\n      })\r\n      .catch((e) => {\r\n        return e;\r\n      });\r\n  };\r\n\r\n  onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // this.setState({ error: \"\" });\r\n    const { passwordOne, passwordTwo, currentPassword } = this.state;\r\n\r\n    if (passwordOne !== passwordTwo) {\r\n      console.log(\"DIFFERENT NEW PASSWORDS\");\r\n      this.setState({\r\n        error: { message: \"The two passwords are different from each other.\" },\r\n      });\r\n      return;\r\n    }\r\n\r\n    let response = this.managePasswordActions(\r\n      passwordOne,\r\n      passwordTwo,\r\n      currentPassword\r\n    );\r\n    console.log(\"RESPONSE\");\r\n    console.log(response);\r\n  };\r\n\r\n  onChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      currentPassword,\r\n      passwordOne,\r\n      passwordTwo,\r\n      error,\r\n      success,\r\n    } = this.state;\r\n    const { classes } = this.props;\r\n    return (\r\n      <div>\r\n        <div>\r\n          Change the email that your account is linked to. If you forget your\r\n          password, you'll receive any emails from this email instead.\r\n        </div>\r\n        <br />\r\n        <form onSubmit={this.onSubmit}>\r\n          <TextField\r\n            name=\"currentPassword\"\r\n            value={currentPassword}\r\n            onChange={this.onChange}\r\n            type=\"password\"\r\n            label=\"Original Password\"\r\n          />\r\n          <br />\r\n          <TextField\r\n            name=\"passwordOne\"\r\n            value={passwordOne}\r\n            onChange={this.onChange}\r\n            type=\"password\"\r\n            label=\"New Password\"\r\n          />\r\n          <br />\r\n          <TextField\r\n            name=\"passwordTwo\"\r\n            value={passwordTwo}\r\n            onChange={this.onChange}\r\n            type=\"password\"\r\n            label=\"Confirm New Password\"\r\n          />\r\n          <br />\r\n          <br />\r\n          <Button\r\n            type=\"submit\"\r\n            className={classes.primaryLightButton}\r\n            variant=\"contained\"\r\n          >\r\n            Reset Password\r\n          </Button>\r\n\r\n          {error && <p>{error}</p>}\r\n          {success && <p>{success}</p>}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// export default withFirebase(PasswordChangeForm);\r\nexport default compose(withFirebase, withStyles(styles))(PasswordChangeForm);\r\n"]},"metadata":{},"sourceType":"module"}