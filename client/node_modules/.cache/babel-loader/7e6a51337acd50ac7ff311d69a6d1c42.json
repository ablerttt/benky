{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/Albert/Documents/UCLA 2019/Projects/flare/client/src/auth/PasswordChange/index.js\";\nimport React, { Component } from \"react\";\nimport { withFirebase } from \"../Firebase\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { compose } from \"recompose\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport styles from \"../../constants/styles\";\nimport { Console } from \"console\";\nconst INITIAL_STATE = {\n  passwordOne: \"\",\n  passwordTwo: \"\",\n  currentPassword: \"\",\n  error: null\n};\n\nclass PasswordChangeForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.verifyCurrentPassword = async currentPassword => {\n      await this.props.firebase.doCurrentPasswordVerification(currentPassword);\n    };\n\n    this.updateCurrentPassword = async password => {\n      await this.props.firebase.doPasswordUpdate(password);\n    };\n\n    this.onSubmit = async e => {\n      e.preventDefault(); // this.setState({ error: \"\" });\n\n      const {\n        passwordOne,\n        passwordTwo,\n        currentPassword\n      } = this.state;\n\n      if (passwordOne !== passwordTwo) {\n        this.setState({\n          error: \"The two passwords are different from each other.\"\n        });\n        return;\n      }\n\n      await this.verifyCurrentPassword(currentPassword).then(res => {\n        console.log(res);\n        this.updateCurrentPassword(passwordOne).then(res => {\n          console.log(res);\n        });\n      }).catch(e => {\n        console.log(\"PASSWORD VERIFY ERR\");\n        console.log(e);\n        this.setState({\n          error: e.message,\n          success: \"\"\n        });\n        return;\n      }); // await this.updateCurrentPassword(passwordOne)\n      //   .then((res) => {\n      //     console.log(\"PASSWORD UPDATE RES\");\n      //     console.log(res);\n      //     this.setState({ success: \"Successfully updated password!\", error: \"\" });\n      //   })\n      //   .catch((e) => {\n      //     console.log(\"PASSWORD UPDATE ERR\");\n      //     console.log(e);\n      //     this.setState({ error: e.message, success: \"\" });\n      //     return;\n      //   });\n\n      console.log(\"SUCCESS\");\n    };\n\n    this.onChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = { ...INITIAL_STATE,\n      updated: false,\n      success: \"\"\n    };\n  }\n\n  render() {\n    const {\n      currentPassword,\n      passwordOne,\n      passwordTwo,\n      error,\n      success\n    } = this.state;\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, \"Change the email that your account is linked to. If you forget your password, you'll receive any emails from this email instead.\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"currentPassword\",\n      value: currentPassword,\n      onChange: this.onChange,\n      type: \"password\",\n      label: \"Original Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      name: \"passwordOne\",\n      value: passwordOne,\n      onChange: this.onChange,\n      type: \"password\",\n      label: \"New Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      name: \"passwordTwo\",\n      value: passwordTwo,\n      onChange: this.onChange,\n      type: \"password\",\n      label: \"Confirm New Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      className: classes.primaryLightButton,\n      variant: \"contained\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, \"Reset Password\"), error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }, error), success && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 23\n      }\n    }, success)));\n  }\n\n} // export default withFirebase(PasswordChangeForm);\n\n\nexport default compose(withFirebase, withStyles(styles))(PasswordChangeForm);","map":{"version":3,"sources":["/mnt/c/Users/Albert/Documents/UCLA 2019/Projects/flare/client/src/auth/PasswordChange/index.js"],"names":["React","Component","withFirebase","TextField","Button","compose","withStyles","styles","Console","INITIAL_STATE","passwordOne","passwordTwo","currentPassword","error","PasswordChangeForm","constructor","props","verifyCurrentPassword","firebase","doCurrentPasswordVerification","updateCurrentPassword","password","doPasswordUpdate","onSubmit","e","preventDefault","state","setState","then","res","console","log","catch","message","success","onChange","event","target","name","value","updated","render","classes","primaryLightButton"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { withFirebase } from \"../Firebase\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { compose } from \"recompose\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"../../constants/styles\";\r\nimport { Console } from \"console\";\r\n\r\nconst INITIAL_STATE = {\r\n  passwordOne: \"\",\r\n  passwordTwo: \"\",\r\n  currentPassword: \"\",\r\n  error: null,\r\n};\r\n\r\nclass PasswordChangeForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { ...INITIAL_STATE, updated: false, success: \"\" };\r\n  }\r\n\r\n  verifyCurrentPassword = async (currentPassword) => {\r\n    await this.props.firebase.doCurrentPasswordVerification(currentPassword);\r\n  };\r\n\r\n  updateCurrentPassword = async (password) => {\r\n    await this.props.firebase.doPasswordUpdate(password);\r\n  };\r\n\r\n  onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // this.setState({ error: \"\" });\r\n    const { passwordOne, passwordTwo, currentPassword } = this.state;\r\n\r\n    if (passwordOne !== passwordTwo) {\r\n      this.setState({\r\n        error: \"The two passwords are different from each other.\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    await this.verifyCurrentPassword(currentPassword)\r\n      .then((res) => {\r\n        console.log(res);\r\n        this.updateCurrentPassword(passwordOne).then((res) => {\r\n          console.log(res);\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        console.log(\"PASSWORD VERIFY ERR\");\r\n        console.log(e);\r\n        this.setState({ error: e.message, success: \"\" });\r\n        return;\r\n      });\r\n\r\n    // await this.updateCurrentPassword(passwordOne)\r\n    //   .then((res) => {\r\n    //     console.log(\"PASSWORD UPDATE RES\");\r\n    //     console.log(res);\r\n    //     this.setState({ success: \"Successfully updated password!\", error: \"\" });\r\n    //   })\r\n    //   .catch((e) => {\r\n    //     console.log(\"PASSWORD UPDATE ERR\");\r\n    //     console.log(e);\r\n    //     this.setState({ error: e.message, success: \"\" });\r\n    //     return;\r\n    //   });\r\n\r\n    console.log(\"SUCCESS\");\r\n  };\r\n\r\n  onChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      currentPassword,\r\n      passwordOne,\r\n      passwordTwo,\r\n      error,\r\n      success,\r\n    } = this.state;\r\n    const { classes } = this.props;\r\n    return (\r\n      <div>\r\n        <div>\r\n          Change the email that your account is linked to. If you forget your\r\n          password, you'll receive any emails from this email instead.\r\n        </div>\r\n        <br />\r\n        <form onSubmit={this.onSubmit}>\r\n          <TextField\r\n            name=\"currentPassword\"\r\n            value={currentPassword}\r\n            onChange={this.onChange}\r\n            type=\"password\"\r\n            label=\"Original Password\"\r\n          />\r\n          <br />\r\n          <TextField\r\n            name=\"passwordOne\"\r\n            value={passwordOne}\r\n            onChange={this.onChange}\r\n            type=\"password\"\r\n            label=\"New Password\"\r\n          />\r\n          <br />\r\n          <TextField\r\n            name=\"passwordTwo\"\r\n            value={passwordTwo}\r\n            onChange={this.onChange}\r\n            type=\"password\"\r\n            label=\"Confirm New Password\"\r\n          />\r\n          <br />\r\n          <br />\r\n          <Button\r\n            type=\"submit\"\r\n            className={classes.primaryLightButton}\r\n            variant=\"contained\"\r\n          >\r\n            Reset Password\r\n          </Button>\r\n\r\n          {error && <p>{error}</p>}\r\n          {success && <p>{success}</p>}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// export default withFirebase(PasswordChangeForm);\r\nexport default compose(withFirebase, withStyles(styles))(PasswordChangeForm);\r\n"]},"metadata":{},"sourceType":"module"}