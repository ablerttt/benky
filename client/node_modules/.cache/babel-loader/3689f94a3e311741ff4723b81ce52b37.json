{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/Albert/Documents/UCLA 2019/Projects/flare/client/src/auth/PasswordChange/index.js\";\nimport React, { Component } from \"react\";\nimport { withFirebase } from \"../Firebase\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { compose } from \"recompose\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport styles from \"../../constants/styles\";\nimport { Console } from \"console\";\nconst INITIAL_STATE = {\n  passwordOne: \"\",\n  passwordTwo: \"\",\n  currentPassword: \"\",\n  error: null\n};\n\nclass PasswordChangeForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSubmit = async e => {\n      e.preventDefault();\n      this.setState({\n        error: \"\"\n      });\n      const {\n        passwordOne,\n        passwordTwo,\n        currentPassword\n      } = this.state;\n\n      if (passwordOne !== passwordTwo) {\n        this.setState({\n          error: {\n            message: \"The two passwords are different from each other.\"\n          }\n        });\n        return;\n      }\n\n      await this.props.firebase.doCurrentPasswordVerification(currentPassword).then(res => {\n        console.log(\"PASSWORD VERIFY RES\");\n        console.log(res);\n\n        if (res.message) {\n          this.setState({\n            error: res.message\n          });\n          return;\n        }\n      }).catch(e => {\n        console.log(\"PASSWORD VERIFY ERR\");\n        console.log(e);\n      });\n      this.props.firebase.doPasswordUpdate(passwordOne).then(res => {\n        console.log(\"PASSWORD CHANGE RES\");\n        console.log(res);\n\n        if (res) {\n          this.setState({\n            error: res\n          });\n        }\n      }).catch(e => {\n        console.log(\"PASSWORD CHANGE ERR\");\n        console.log(e);\n      }); // console.log(\"UPDATE ERR: \" + updateErr);\n      // if (updateErr) {\n      //   this.setState({ error: updateErr });\n      // } else {\n      //   this.setState({\n      //     success: \"Successfully updated your password!\",\n      //     passwordOne: \"\",\n      //     passwordTwo: \"\",\n      //     currentPassword: \"\",\n      //   });\n      // }\n    };\n\n    this.onChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = { ...INITIAL_STATE,\n      updated: false,\n      success: \"\"\n    };\n  }\n\n  render() {\n    const {\n      currentPassword,\n      passwordOne,\n      passwordTwo,\n      error,\n      success\n    } = this.state;\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }\n    }, \"Change the email that your account is linked to. If you forget your password, you'll receive any emails from this email instead.\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"currentPassword\",\n      value: currentPassword,\n      onChange: this.onChange,\n      type: \"password\",\n      label: \"Original Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      name: \"passwordOne\",\n      value: passwordOne,\n      onChange: this.onChange,\n      type: \"password\",\n      label: \"New Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      name: \"passwordTwo\",\n      value: passwordTwo,\n      onChange: this.onChange,\n      type: \"password\",\n      label: \"Confirm New Password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      className: classes.primaryLightButton,\n      variant: \"contained\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }, \"Reset Password\"), error && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    }, error.message), success && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 23\n      }\n    }, success.message)));\n  }\n\n} // export default withFirebase(PasswordChangeForm);\n\n\nexport default compose(withFirebase, withStyles(styles))(PasswordChangeForm);","map":{"version":3,"sources":["/mnt/c/Users/Albert/Documents/UCLA 2019/Projects/flare/client/src/auth/PasswordChange/index.js"],"names":["React","Component","withFirebase","TextField","Button","compose","withStyles","styles","Console","INITIAL_STATE","passwordOne","passwordTwo","currentPassword","error","PasswordChangeForm","constructor","props","onSubmit","e","preventDefault","setState","state","message","firebase","doCurrentPasswordVerification","then","res","console","log","catch","doPasswordUpdate","onChange","event","target","name","value","updated","success","render","classes","primaryLightButton"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { withFirebase } from \"../Firebase\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { compose } from \"recompose\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport styles from \"../../constants/styles\";\r\nimport { Console } from \"console\";\r\n\r\nconst INITIAL_STATE = {\r\n  passwordOne: \"\",\r\n  passwordTwo: \"\",\r\n  currentPassword: \"\",\r\n  error: null,\r\n};\r\n\r\nclass PasswordChangeForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { ...INITIAL_STATE, updated: false, success: \"\" };\r\n  }\r\n\r\n  onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    this.setState({ error: \"\" });\r\n    const { passwordOne, passwordTwo, currentPassword } = this.state;\r\n\r\n    if (passwordOne !== passwordTwo) {\r\n      this.setState({\r\n        error: { message: \"The two passwords are different from each other.\" },\r\n      });\r\n      return;\r\n    }\r\n\r\n    await this.props.firebase\r\n      .doCurrentPasswordVerification(currentPassword)\r\n      .then((res) => {\r\n        console.log(\"PASSWORD VERIFY RES\");\r\n        console.log(res);\r\n        if (res.message) {\r\n          this.setState({ error: res.message });\r\n          return;\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log(\"PASSWORD VERIFY ERR\");\r\n        console.log(e);\r\n      });\r\n\r\n    this.props.firebase\r\n      .doPasswordUpdate(passwordOne)\r\n      .then((res) => {\r\n        console.log(\"PASSWORD CHANGE RES\");\r\n        console.log(res)\r\n        if (res) {\r\n          this.setState({error: res})\r\n          \r\n        }\r\n      })\r\n      .catch((e) => {\r\n        console.log(\"PASSWORD CHANGE ERR\");\r\n        console.log(e);\r\n      });\r\n    // console.log(\"UPDATE ERR: \" + updateErr);\r\n    // if (updateErr) {\r\n    //   this.setState({ error: updateErr });\r\n    // } else {\r\n    //   this.setState({\r\n    //     success: \"Successfully updated your password!\",\r\n    //     passwordOne: \"\",\r\n    //     passwordTwo: \"\",\r\n    //     currentPassword: \"\",\r\n    //   });\r\n    // }\r\n  };\r\n\r\n  onChange = (event) => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      currentPassword,\r\n      passwordOne,\r\n      passwordTwo,\r\n      error,\r\n      success,\r\n    } = this.state;\r\n    const { classes } = this.props;\r\n    return (\r\n      <div>\r\n        <div>\r\n          Change the email that your account is linked to. If you forget your\r\n          password, you'll receive any emails from this email instead.\r\n        </div>\r\n        <br />\r\n        <form onSubmit={this.onSubmit}>\r\n          <TextField\r\n            name=\"currentPassword\"\r\n            value={currentPassword}\r\n            onChange={this.onChange}\r\n            type=\"password\"\r\n            label=\"Original Password\"\r\n          />\r\n          <br />\r\n          <TextField\r\n            name=\"passwordOne\"\r\n            value={passwordOne}\r\n            onChange={this.onChange}\r\n            type=\"password\"\r\n            label=\"New Password\"\r\n          />\r\n          <br />\r\n          <TextField\r\n            name=\"passwordTwo\"\r\n            value={passwordTwo}\r\n            onChange={this.onChange}\r\n            type=\"password\"\r\n            label=\"Confirm New Password\"\r\n          />\r\n          <br />\r\n          <br />\r\n          <Button\r\n            type=\"submit\"\r\n            className={classes.primaryLightButton}\r\n            variant=\"contained\"\r\n          >\r\n            Reset Password\r\n          </Button>\r\n\r\n          {error && <p>{error.message}</p>}\r\n          {success && <p>{success.message}</p>}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// export default withFirebase(PasswordChangeForm);\r\nexport default compose(withFirebase, withStyles(styles))(PasswordChangeForm);\r\n"]},"metadata":{},"sourceType":"module"}